<div class="language-resume-container">

  <div class="language-selector-container">
    <button class="language-selector" (click)="toggleLanguageSelector()">
      <p class="visually-hidden">Language selector</p>
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
        stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
        class="lucide lucide-globe w-4 h-4">
        <circle cx="12" cy="12" r="10"></circle>
        <path d="M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20"></path>
        <path d="M2 12h20"></path>
      </svg>
      <span class="language-text">{{ currentLanguage.code.toUpperCase() }}</span>
      <svg class="dropdown-arrow" [ngClass]="{ 'rotate-180': isOpenSelector() }" width="12" height="8"
        viewBox="0 0 12 8" fill="none">
        <path d="M1 1.5L6 6.5L11 1.5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"
          stroke-linejoin="round" />
      </svg>
    </button>

    @if(isOpenSelector()) {
    <!-- Enhanced Backdrop with blur -->
    @if(isOpenSelector()) {
    <div class="overlay-layer" (click)="toggleLanguageSelector()"></div>
    }

    <!-- Apple-style Dropdown - Responsive sizing  -->
    <div
      class="absolute top-full right-0 mt-3 w-56 lg:w-64 xl:w-72 2xl:w-80 z-[70] animate-in slide-in-from-top-2 duration-200">
      <!-- Main dropdown container with glassmorphism -->
      <div
        class="relative backdrop-blur-3xl bg-[#0f0227]/80 border border-white/20 rounded-3xl shadow-2xl overflow-hidden">
        <!-- Additional blur layer -->
        <div
          class="absolute inset-0 backdrop-blur-2xl bg-gradient-to-br from-white/15 via-purple-500/10 to-blue-500/10">
        </div>

        <!-- Animated liquid blobs - Responsive sizing -->
        <div class="absolute -top-8 -right-8 w-12 h-12 lg:w-16 lg:h-16 xl:w-20 xl:h-20 bg-gradient-to-br from-purple-400/30 to-blue-400/30 rounded-full blur-xl animate-pulse"></div>
        <div class="absolute -bottom-8 -left-8 w-10 h-10 lg:w-12 lg:h-12 xl:w-16 xl:h-16 bg-gradient-to-tr from-pink-400/30 to-purple-400/30 rounded-full blur-xl animate-pulse delay-1000"></div>

        <!-- Content -->
        <div
        class="relative max-h-80 lg:max-h-96 xl:max-h-[28rem] 2xl:max-h-[32rem] overflow-y-auto custom-scrollbar">
          <div class="p-1.5 lg:p-2 xl:p-2.5 pr-3 lg:pr-3 xl:pr-5">
            @for (language of supportedLanguages; track language.code) {
            <button (click)="handleLanguageChange(language)"
              class="relative w-full px-3 py-2 lg:px-4 lg:py-2.5 xl:px-5 xl:py-3 2xl:px-6 2xl:py-3.5 text-left text-sm lg:text-base xl:text-lg transition-all duration-300 flex items-center gap-2.5 lg:gap-3 xl:gap-3.5 group rounded-xl lg:rounded-2xl btn-menu-option cursor-pointer"
              [ngClass]="{ 'text-white bg-white/20 backdrop-blur-md shadow-lg scale-[0.98]': isSelectedLang(language), 'text-white/90 hover:text-white hover:bg-white/15 hover:backdrop-blur-md hover:scale-[0.99]': !isSelectedLang(language) }"
              [disabled]="isLoadingLanguage()">

              <!-- Selection indicator -->
              @if(currentLanguage.code === language.code) {
              <div
                class="absolute inset-0 bg-gradient-to-r from-purple-500/30 via-blue-500/30 to-purple-500/30 rounded-xl lg:rounded-2xl animate-pulse">
              </div>
              }

              <!-- Content -->
              <div class="relative flex items-center gap-2.5 lg:gap-3 xl:gap-3.5 w-full">
                <span
                  class="text-base lg:text-lg xl:text-xl 2xl:text-2xl group-hover:scale-110 transition-transform duration-300 filter drop-shadow-sm flex-shrink-0">
                  {{ language.flag }}
                </span>
                <span class="font-medium tracking-wide truncate">{{language.name}}</span>

                @if(currentLanguage.code === language.code) {
                  <div class="ml-auto flex items-center flex-shrink-0">
                    <div class="w-1.5 h-1.5 lg:w-2 lg:h-2 xl:w-2.5 xl:h-2.5 bg-gradient-to-r from-purple-400 to-blue-400 rounded-full animate-pulse shadow-lg"></div>
                  </div>
                }
              </div>

              <!-- Hover liquid effect -->
              <div class="absolute inset-0 bg-gradient-to-r from-transparent via-white/10 to-transparent opacity-0 group-hover:opacity-100 transition-all duration-500 rounded-xl lg:rounded-2xl"></div>
            </button>
            }
          </div>
        </div>
        <!-- Bottom accent line -->
        <div class="absolute bottom-0 left-4 right-4 h-px bg-gradient-to-r from-transparent via-white/30 to-transparent"></div>

        <!-- Enhanced scroll fade indicators -->
        <div class="absolute top-0 left-0 right-0 h-6 bg-gradient-to-b from-[#0f0227]/80 via-[#0f0227]/40 to-transparent pointer-events-none rounded-t-3xl"></div>
        <div class="absolute bottom-0 left-0 right-0 h-6 bg-gradient-to-t from-[#0f0227]/80 via-[#0f0227]/40 to-transparent pointer-events-none rounded-b-3xl"></div>
      </div>

      <!-- Enhanced floating shadow -->
      <div class="absolute inset-0 -z-10 bg-black/40 blur-3xl rounded-3xl transform translate-y-2 scale-95"></div>
    </div>
    }
  </div>


  <div class="divider"></div>

  <header-resume-button></header-resume-button>
</div>
